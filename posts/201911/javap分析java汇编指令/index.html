<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />
    <title>WebStack-Hugo 网址导航</title>
    <link rel="shortcut icon" href="/assets/images/favicon.png" />
    <meta name="keywords" content="WebStack-Hugo 网址导航" />
    
    <meta name="baidu-site-verification" content="codeva-cCAOSG8MBO" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="bootstrap-css" href="/assets/css/bootstrap.min-4.3.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="fancybox-css" href="/assets/css/fancybox.min-3.5.7.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />
    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>
    
    <script>
        
        var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?efccc04cb44fc49faddac5876180b369";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        
    </script>
    
    
     
    
    
    
    
</head>


<div class="main-content flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="WebStack-Hugo 网址导航">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="WebStack-Hugo 网址导航">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="WebStack-Hugo 网址导航">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="./">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			<li >
				<a href="https://www.jackssybin.cn/">
                                    <i class="fa fa-book fa-lg mr-2"></i>
                                    <span>作者</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			<li class="menu-item-has-children">
				<a href="">
                                    <i class="fa fa-cog fa-lg mr-2"></i>
                                    <span>配置</span>
                                </a>
				<ul class="sub-menu">
				
				    <li><a href="#">源码</a></li>
				
				    <li><a href="#">图标</a></li>
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "E4C600",
                                        "tmpSize": 14,
                                        "cityColor": "E4C600",
                                        "citySize": 14,
                                        "aqiColor": "#E4C600",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>


<body class="page-body boxed-container">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        <h1 class="mt-5"></h1>
        <div class="content">
            <h2 id="permalink-articles201911201574217206931html">title: javap分析java汇编指令
date: &lsquo;2019-11-20 10:33:26&rsquo;
updated: &lsquo;2019-11-20 10:38:36&rsquo;
tags: [javap, 汇编, jvm]
permalink: /articles/2019/11/20/1574217206931.html</h2>
<h1 id="一javap命令简述">一、javap命令简述</h1>
<p>javap是jdk自带的反解析工具。它的作用就是根据class字节码文件，反解析出当前类对应的code区（汇编指令）、本地变量表、异常表和代码行偏移量映射表、常量池等等信息。<br>
当然这些信息中，有些信息（如本地变量表、指令和代码行偏移量映射表、常量池中方法的参数名称等等）需要在使用javac编译成class文件时，指定参数才能输出，比如，你直接javac xx.java，就不会在生成对应的局部变量表等信息，如果你使用javac -g xx.java就可以生成所有相关信息了。如果你使用的eclipse，则默认情况下，eclipse在编译时会帮你生成局部变量表、指令和代码行偏移量映射表等信息的。<br>
通过反编译生成的汇编代码，我们可以深入的了解java代码的工作机制。比如我们可以查看i++；这行代码实际运行时是先获取变量i的值，然后将这个值加1，最后再将加1后的值赋值给变量i。<br>
通过局部变量表，我们可以查看局部变量的作用域范围、所在槽位等信息，甚至可以看到槽位复用等信息。</p>
<p>javap的用法格式：<br>
<code>javap &lt;options&gt; &lt;classes&gt;</code><br>
其中classes就是你要反编译的class文件。<br>
在命令行中直接输入javap或javap -help可以看到javap的options有如下选项：</p>
<pre tabindex="0"><code> -help  --help  -?        输出此用法消息
 -version                 版本信息，其实是当前javap所在jdk的版本信息，不是class在哪个jdk下生成的。
 -v  -verbose             输出附加信息（包括行号、本地变量表，反汇编等详细信息）
 -l                         输出行号和本地变量表
 -public                    仅显示公共类和成员
 -protected               显示受保护的/公共类和成员
 -package                 显示程序包/受保护的/公共类 和成员 (默认)
 -p  -private             显示所有类和成员
 -c                       对代码进行反汇编
 -s                       输出内部类型签名
 -sysinfo                 显示正在处理的类的系统信息 (路径, 大小, 日期, MD5 散列)
 -constants               显示静态最终常量
 -classpath &lt;path&gt;        指定查找用户类文件的位置
 -bootclasspath &lt;path&gt;    覆盖引导类文件的位置
</code></pre><p>一般常用的是-v -l -c三个选项。<br>
javap -v classxx，不仅会输出行号、本地变量表信息、反编译汇编代码，还会输出当前类用到的常量池等信息。<br>
javap -l 会输出行号和本地变量表信息。<br>
javap -c 会对当前class字节码进行反编译生成汇编代码。</p>
<h1 id="二javap测试及内容详解">二、javap测试及内容详解</h1>
<p>前面已经介绍过javap输出的内容有哪些，东西比较多，这里主要介绍其中code区(汇编指令)、局部变量表和代码行偏移映射三个部分。<br>
如果需要分析更多的信息，可以使用javap -v进行查看。<br>
另外，为了更方便理解，所有汇编指令不单拎出来讲解，而是在反汇编代码中以注释的方式讲解</p>
<pre tabindex="0"><code>public class TestDate {
    private int count = 0;
    public static void main(String[] args) {
        TestDate testDate = new TestDate();
        testDate.test1();
    }
<pre><code>public void test1(){
    Date date = new Date();
    String name1 = &amp;#34;wangerbei&amp;#34;;
    test2(date,name1); 
    System.out.println(date+name1);
}

public void test2(Date dateP,String name2){
    dateP = null;
    name2 = &amp;#34;zhangsan&amp;#34;;
}

public void test3(){
    count++;
}

public void  test4(){
    int a = 0;
    {
        int b = 0;
        b = a+1;
    }
    int c = a+1;
}
</code></pre>
<p>}
</code></pre><p>上面代码通过javac -g 生成class文件，然后通过javap命令对字节码进行反汇编：</p></p>
<pre tabindex="0"><code>$ javap -c -l TestDate
</code></pre><p>得到下面内容</p>
<pre tabindex="0"><code>Warning: Binary file TestDate contains com.justest.test.TestDate

Compiled from &#34;TestDate.java&#34;

public class com.justest.test.TestDate {

  //默认的构造方法，在构造方法执行时主要完成一些初始化操作，包括一些成员变量的初始化赋值等操作
  public com.justest.test.TestDate();
    Code:
       0: aload_0 //从本地变量表中加载索引为0的变量的值，也即this的引用，压入栈
       1: invokespecial #10  //出栈，调用java/lang/Object.&#34;&lt;init&gt;&#34;:()V 初始化对象，就是this指定的对象的init()方法完成初始化
       4: aload_0  // 4到6表示，调用this.count = 0，也即为count复制为0。这里this引用入栈
       5: iconst_0 //将常量0，压入到操作数栈
       6: putfield     //出栈前面压入的两个值（this引用，常量值0）， 将0取出，并赋值给count
       9: return
//指令与代码行数的偏移对应关系，每一行第一个数字对应代码行数，第二个数字对应前面code中指令前面的数字
    LineNumberTable:
      line 5: 0
      line 7: 4
      line 5: 9
    //局部变量表，start+length表示这个变量在字节码中的生命周期起始和结束的偏移位置（this生命周期从头0到结尾10），slot就是这个变量在局部变量表中的槽位（槽位可复用），name就是变量名称，Signatur局部变量类型描述
    LocalVariableTable:
      Start  Length  Slot  Name   Signature
         0      10     0  this   Lcom/justest/test/TestDate;
 
  public static void main(java.lang.String[]);
    Code:
// new指令，创建一个class com/justest/test/TestDate对象，new指令并不能完全创建一个对象，对象只有在初，只有在调用初始化方法完成后（也就是调用了invokespecial指令之后），对象才创建成功,
       0: new  //创建对象，并将对象引用压入栈
       3: dup //将操作数栈定的数据复制一份，并压入栈，此时栈中有两个引用值
       4: invokespecial #20  //pop出栈引用值,调用其构造函数，完成对象的初始化
       7: astore_1 //pop出栈引用值，将其（引用）赋值给局部变量表中的变量testDate
       8: aload_1  //将testDate的引用值压入栈，因为testDate.test1();调用了testDate，这里使用aload_1从局部变量表中获得对应的变量testDate的值并压入操作数栈
       9: invokevirtual #21 // Method test1:()V  引用出栈，调用testDate的test1()方法
      12: return //整个main方法结束返回
    LineNumberTable:
      line 10: 0
      line 11: 8
      line 12: 12
    //局部变量表，testDate只有在创建完成并赋值后，才开始声明周期
    LocalVariableTable:
      Start  Length  Slot  Name   Signature
         0      13     0  args   [Ljava/lang/String;
         8       5     1 testDate   Lcom/justest/test/TestDate;
 
  public void test1();
    Code:
       0: new           #27                 // 0到7创建Date对象，并赋值给date变量
       3: dup
       4: invokespecial #29                 // Method java/util/Date.&#34;&lt;init&gt;&#34;:()V
       7: astore_1
       8: ldc           #30     // String wangerbei，将常量“wangerbei”压入栈
      10: astore_2  //将栈中的“wangerbei”pop出，赋值给name1
      11: aload_0 //11到14，对应test2(date,name1);默认前面加this.
      12: aload_1 //从局部变量表中取出date变量
      13: aload_2 //取出name1变量
      14: invokevirtual #32                 // Method test2: (Ljava/util/Date;Ljava/lang/String;)V  调用test2方法
  // 17到38对应System.out.println(date+name1);
      17: getstatic     #36                 // Field java/lang/System.out:Ljava/io/PrintStream;
  //20到35是jvm中的优化手段，多个字符串变量相加，不会两两创建一个字符串对象，而使用StringBuilder来创建一个对象
      20: new           #42                 // class java/lang/StringBuilder
      23: dup
      24: invokespecial #44                 // Method java/lang/StringBuilder.&#34;&lt;init&gt;&#34;:()V
      27: aload_1
      28: invokevirtual #45                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: aload_2
      32: invokevirtual #49                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: invokevirtual #52                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      38: invokevirtual #56                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V  invokevirtual指令表示基于类调用方法
      41: return
    LineNumberTable:
      line 15: 0
      line 16: 8
      line 17: 11
      line 18: 17
      line 19: 41
    LocalVariableTable:
      Start  Length  Slot  Name   Signature
             0      42     0  this   Lcom/justest/test/TestDate;
             8      34     1  date   Ljava/util/Date;
            11      31     2 name1   Ljava/lang/String;
 
  public void test2(java.util.Date, java.lang.String);
    Code:
       0: aconst_null //将一个null值压入栈
       1: astore_1 //将null赋值给dateP
       2: ldc           #66       // String zhangsan 从常量池中取出字符串“zhangsan”压入栈中
       4: astore_2 //将字符串赋值给name2
       5: return
    LineNumberTable:
      line 22: 0
      line 23: 2
      line 24: 5
    LocalVariableTable:
      Start  Length  Slot  Name   Signature
             0       6     0  this   Lcom/justest/test/TestDate;
             0       6     1 dateP   Ljava/util/Date;
             0       6     2 name2   Ljava/lang/String;
 
  public void test3();
    Code:
       0: aload_0 //取出this，压入栈
       1: dup   //复制操作数栈栈顶的值，并压入栈，此时有两个this对象引用值在操作数组栈
       2: getfield #12// Field count:I this出栈，并获取其count字段，然后压入栈，此时栈中有一个this和一个count的值
       5: iconst_1 //取出一个int常量1,压入操作数栈
       6: iadd  // 从栈中取出count和1，将count值和1相加，结果入栈
       7: putfield      #12 // Field count:I  一次弹出两个，第一个弹出的是上一步计算值，第二个弹出的this，将值赋值给this的count字段
      10: return
    LineNumberTable:
      line 27: 0
      line 28: 10
    LocalVariableTable:
      Start  Length  Slot  Name   Signature
             0      11     0  this   Lcom/justest/test/TestDate;
 public void test4();
    Code:
       0: iconst_0
       1: istore_1
       2: iconst_0
       3: istore_2
       4: iload_1
       5: iconst_1
       6: iadd
       7: istore_2
       8: iload_1
       9: iconst_1
      10: iadd
      11: istore_2
      12: return
    LineNumberTable:
      line 33: 0
      line 35: 2
      line 36: 4
      line 38: 8
      line 39: 12
    //看下面，b和c的槽位slot一样，这是因为b的作用域就在方法块中，方法块结束，局部变量表中的槽位就被释放，后面的变量就可以复用这个槽位
    LocalVariableTable:
      Start  Length  Slot  Name   Signature
             0      13     0  this   Lcom/justest/test/TestDate;
             2      11     1     a   I
             4       4     2     b   I
            12       1     2     c   I
}
</code></pre><p>**例子2：**下面一个例子<br>
<p>先有一个User类：</p></p>
<pre tabindex="0"><code>public class User {

    private String name;

    private int age;
 
    public String getName() {
        return name;
    }
 
    public void setName(String name) {
        this.name = name;
    }
 
    public int getAge() {
        return age;
    }
 
    public void setAge(int age) {
        this.age = age;
    }
}
</code></pre><p>然后写一个操作User对象的测试类：</p>
<pre tabindex="0"><code>public class TestUser {

     
    private int count;
     
    public void test(int a){
        count = count + a;
    }
     
    public User initUser(int age,String name){
        User user = new User();
        user.setAge(age);
        user.setName(name);
        return user;
    }
     
    public void changeUser(User user,String newName){
        user.setName(newName);
    }
}
</code></pre><p>先javac -g 编译成class文件。<br>
<p>然后对TestUser类进行反汇编：</p></p>
<pre tabindex="0"><code>javap -c -l TestUser
</code></pre><p>得到反汇编结果如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Warning: Binary file TestUser contains com.justest.test.TestUser
</span></span><span style="display:flex;"><span>Compiled from <span style="color:#e6db74">&#34;TestUser.java&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">com</span>.justest.test.TestUser {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//默认的构造函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">public</span> com.justest.test.TestUser();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Code:
</span></span><span style="display:flex;"><span>       <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span> aload_0
</span></span><span style="display:flex;"><span>       <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> invokespecial <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">10</span>                 <span style="color:#75715e">// Method java/lang/Object.&#34;&lt;init&gt;&#34;:()V
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    LineNumberTable:
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    LocalVariableTable:
</span></span><span style="display:flex;"><span>      Start  Length  Slot  Name   Signature
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">5</span>        <span style="color:#ae81ff">0</span>     <span style="color:#66d9ef">this</span>       Lcom<span style="color:#f92672">/</span>justest<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>TestUser;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">test</span>(<span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Code:
</span></span><span style="display:flex;"><span>       <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span> aload_0 <span style="color:#75715e">//取this对应的对应引用值，压入操作数栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> dup <span style="color:#75715e">//复制栈顶的数据，压入栈，此时栈中有两个值，都是this对象引用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> getfield      <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">18</span> <span style="color:#75715e">// 引用出栈，通过引用获得对应count的值，并压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> iload_1 <span style="color:#75715e">//从局部变量表中取得a的值，压入栈中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> iadd <span style="color:#75715e">//弹出栈中的count值和a的值，进行加操作，并将结果压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> putfield      <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">18</span> <span style="color:#75715e">// 经过上一步操作后，栈中有两个值，栈顶为上一步操作结果，栈顶下面是this引用，这一步putfield指令，用于将栈顶的值赋值给引用对象的count字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">10</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">return</span> <span style="color:#75715e">//return void
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    LineNumberTable:
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    LocalVariableTable:
</span></span><span style="display:flex;"><span>      Start  Length  Slot  Name   Signature
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">11</span>     <span style="color:#ae81ff">0</span>  <span style="color:#66d9ef">this</span>   Lcom<span style="color:#f92672">/</span>justest<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>TestUser;
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">11</span>     <span style="color:#ae81ff">1</span>     a   I
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> com.justest.test.User initUser(<span style="color:#66d9ef">int</span>, java.lang.String);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Code:
</span></span><span style="display:flex;"><span>       <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span>           <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">23</span>   <span style="color:#75715e">// class com/justest/test/User 创建User对象，并将引用压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> dup <span style="color:#75715e">//复制栈顶值，再次压入栈，栈中有两个User对象的地址引用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> invokespecial <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">25</span>   <span style="color:#75715e">// Method com/justest/test/User.&#34;&lt;init&gt;&#34;:()V 调用user对象初始化
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> astore_3 <span style="color:#75715e">//从栈中pop出User对象的引用值，并赋值给局部变量表中user变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> aload_3 <span style="color:#75715e">//从局部变量表中获得user的值，也就是User对象的地址引用，压入栈中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> iload_1 <span style="color:#75715e">//从局部变量表中获得a的值，并压入栈中，注意aload和iload的区别，一个取值是对象引用，一个是取int类型数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">10</span><span style="color:#f92672">:</span> invokevirtual <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">26</span>  <span style="color:#75715e">// Method com/justest/test/User.setAge:(I)V 操作数栈pop出两个值，一个是User对象引用，一个是a的值，调用setAge方法，并将a的值传给这个方法,setAge操作的就是堆中对象的字段了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">13</span><span style="color:#f92672">:</span> aload_3 <span style="color:#75715e">//同7，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">14</span><span style="color:#f92672">:</span> aload_2 <span style="color:#75715e">//从局部变量表取出name，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">15</span><span style="color:#f92672">:</span> invokevirtual <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">29</span>  <span style="color:#75715e">// MethodUser.setName:(Ljava/lang/String;)V 操作数栈pop出两个值，一个是User对象引用，一个是name的值，调用setName方法，并将a的值传给这个方法，setName操作的就是堆中对象的字段了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">18</span><span style="color:#f92672">:</span> aload_3 <span style="color:#75715e">//从局部变量取出User引用，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">19</span><span style="color:#f92672">:</span> areturn <span style="color:#75715e">//areturn指令用于返回一个对象的引用，也就是上一步中User的引用,这个返回值将会被压入调用当前方法的那个方法的栈中objectref is popped from the operand stack of the current frame ([§2.6](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.6)) and pushed onto the operand stack of the frame of the invoker
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    LineNumberTable:
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">12</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">13</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">14</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">13</span>
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">15</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">18</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    LocalVariableTable:
</span></span><span style="display:flex;"><span>      Start  Length  Slot  Name   Signature
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">20</span>     <span style="color:#ae81ff">0</span>  <span style="color:#66d9ef">this</span>   Lcom<span style="color:#f92672">/</span>justest<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>TestUser;
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">20</span>     <span style="color:#ae81ff">1</span>   age   I
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">20</span>     <span style="color:#ae81ff">2</span>  name   Ljava<span style="color:#f92672">/</span>lang<span style="color:#f92672">/</span>String;
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">8</span>      <span style="color:#ae81ff">12</span>     <span style="color:#ae81ff">3</span>  user   Lcom<span style="color:#f92672">/</span>justest<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>User;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">changeUser</span>(com.justest.test.User, java.lang.String);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Code:
</span></span><span style="display:flex;"><span>       <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span> aload_1 <span style="color:#75715e">//局部变量表中取出this，也即TestUser对象引用，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> aload_2 <span style="color:#75715e">//局部变量表中取出newName，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> invokevirtual <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">29</span> <span style="color:#75715e">// Method User.setName:(Ljava/lang/String;)V pop出栈newName值和TestUser引用，调用其setName方法，并将newName的值传给这个方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    LineNumberTable:
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">19</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">20</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    LocalVariableTable:
</span></span><span style="display:flex;"><span>      Start  Length  Slot  Name   Signature
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">0</span>  <span style="color:#66d9ef">this</span>   Lcom<span style="color:#f92672">/</span>justest<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>TestUser;
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">1</span>  user   Lcom<span style="color:#f92672">/</span>justest<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>User;
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">2</span> newName   Ljava<span style="color:#f92672">/</span>lang<span style="color:#f92672">/</span>String;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(java.lang.String[]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Code:
</span></span><span style="display:flex;"><span>       <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span>      <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">1</span> <span style="color:#75715e">// class com/justest/test/TestUser 创建TestUser对象，将引用压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> dup <span style="color:#75715e">//复制引用，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> invokespecial <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">43</span>   <span style="color:#75715e">// Method &#34;&lt;init&gt;&#34;:()V 引用值出栈，调用构造方法，对象初始化
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> astore_1 <span style="color:#75715e">//引用值出栈，赋值给局部变量表中变量tu
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> aload_1 <span style="color:#75715e">//取出tu值，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> bipush    <span style="color:#ae81ff">10</span> <span style="color:#75715e">//将int值10压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">11</span><span style="color:#f92672">:</span> ldc           <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">44</span>   <span style="color:#75715e">// String wangerbei 从常量池中取出“wangerbei” 压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">13</span><span style="color:#f92672">:</span> invokevirtual <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">46</span>    <span style="color:#75715e">// Method initUser(ILjava/lang/String;)Lcom/justest/test/User; 调用tu的initUser方法，并返回User对象 ，出栈三个值：tu引用，10和“wangerbei”，并且initUser方法的返回值，即User的引用，也会被压入栈中，参考前面initUser中的areturn指令
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">16</span><span style="color:#f92672">:</span> astore_2 <span style="color:#75715e">//User引用出栈，赋值给user变量
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">17</span><span style="color:#f92672">:</span> aload_1 <span style="color:#75715e">//取出tu值，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">18</span><span style="color:#f92672">:</span> aload_2 <span style="color:#75715e">//取出user值，压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">19</span><span style="color:#f92672">:</span> ldc           <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">48</span>     <span style="color:#75715e">// String lisi 从常量池中取出“lisi”压入栈
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">21</span><span style="color:#f92672">:</span> invokevirtual <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">50</span>     <span style="color:#75715e">// Method changeUser:(Lcom/justest/test/User;Ljava/lang/String;)V 调用tu的changeUser方法，并将user引用和lisi传给这个方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">24</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">return</span> <span style="color:#75715e">//return void
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   
</span></span><span style="display:flex;"><span> LineNumberTable:
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">23</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">24</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">25</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">17</span>
</span></span><span style="display:flex;"><span>      line <span style="color:#ae81ff">26</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">24</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    LocalVariableTable:
</span></span><span style="display:flex;"><span>      Start  Length  Slot  Name   Signature
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">25</span>        <span style="color:#ae81ff">0</span>    args        [Ljava<span style="color:#f92672">/</span>lang<span style="color:#f92672">/</span>String;
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">8</span>      <span style="color:#ae81ff">17</span>        <span style="color:#ae81ff">1</span>    tu   		Lcom<span style="color:#f92672">/</span>justest<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>TestUser;
</span></span><span style="display:flex;"><span>        <span style="color:#ae81ff">17</span>     <span style="color:#ae81ff">8</span>         <span style="color:#ae81ff">2</span>    user   	Lcom<span style="color:#f92672">/</span>justest<span style="color:#f92672">/</span>test<span style="color:#f92672">/</span>User;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="三总结">三、总结</h1>
<p>1、通过javap命令可以查看一个java类反汇编、常量池、变量表、指令代码行号表等等信息。</p>
<p>2、平常，我们比较关注的是java类中每个方法的反汇编中的指令操作过程，这些指令都是顺序执行的，可以参考官方文档查看每个指令的含义，很简单：</p>
<p><a href="https://link.jianshu.com?t=https%3A%2F%2Fdocs.oracle.com%2Fjavase%2Fspecs%2Fjvms%2Fse7%2Fhtml%2Fjvms-6.html%23jvms-6.5.areturn">https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.areturn</a></p>
<p>3、通过对前面两个例子代码反汇编中各个指令操作的分析，可以发现，一个方法的执行通常会涉及下面几块内存的操作：</p>
<p>（1）java栈中：局部变量表、操作数栈。这些操作基本上都值操作。<br>
（2）java堆。通过对象的地址引用去操作。<br>
（3）常量池。<br>
（4）其他如帧数据区、方法区（jdk1.8之前，常量池也在方法区）等部分，测试中没有显示出来，这里说明一下。</p>
<p>在做值相关操作时：<br>
一个指令，可以从局部变量表、常量池、堆中对象、方法调用、系统调用中等取得数据，这些数据（可能是指，可能是对象的引用）被压入操作数栈。<br>
一个指令，也可以从操作数数栈中取出一到多个值（pop多次），完成赋值、加减乘除、方法传参、系统调用等等操作。</p>
<p>转载:<a href="https://www.jianshu.com/p/6a8997560b05">https://www.jianshu.com/p/6a8997560b05  </a></p>

        </div>
    </div>
    </main>

    <style>
        .content {
            font-size: 1.25rem;
          }
          
          .content h1,
          .content h2,
          .content h3,
          .content h4 {
            margin: 15px 10px 5px;
          }
          
    </style>

        <footer class="main-footer footer-type-1 text-xs">
            <div id="footer-tools" class="d-flex flex-column">
                <a href="javascript:" id="go-to-up" class="btn rounded-circle go-up m-1" rel="go-top">
                    <i class="iconfont icon-to-up"></i>
                </a>
                
                <a href="javascript:" data-toggle="modal" data-target="#search-modal" class="btn rounded-circle m-1"
                    rel="search" one-link-mark="yes">
                    <i class="iconfont icon-search"></i>
                </a>
                <a href="https://www.yuque.com/shenweiyan" class="btn rounded-circle kefu m-1" target="_blank" data-toggle="tooltip" data-placement="left" title="联系我们">
                    <i class="mode-ico iconfont icon-qq"></i>
                </a>
                
                
		<a href="javascript:" onclick="window.location.href='javascript:switchNightMode()'" class="btn rounded-circle switch-dark-mode m-1" id="yejian"
                    data-toggle="tooltip" data-placement="left" title="日间模式">
                    <i class="mode-ico iconfont icon-night"></i>
                </a>
                
            </div>
            <div class="footer-inner">
                <div class="footer-text">本站内容源自互联网，如有内容侵犯了你的权益，请联系删除相关内容，联系邮箱：jackxiazhou@yeah.net <br/>© 2023 - 2024 By <a href="https://github.com/shenweiyan/WebStack-Hugo">WebStack-Hugo</a> | <a href="https://www.bioitee.com/">Bio IT 爱好者</a> | <a href="http://beian.miit.gov.cn/">京ICP备17039180号-1</a><br/></div>
            </div>
        </footer>
    </div>
</div>


<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-mini.js' id='appmini-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)")
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>
</body>
</html>

