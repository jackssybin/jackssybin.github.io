<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />
    <title>jackssybin网址导航</title>
    <link rel="shortcut icon" href="/assets/images/favicon.ico" />
    <meta name="keywords" content="jackssybin网址导航" />
    
    <meta name="baidu-site-verification" content="codeva-cCAOSG8MBO" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="bootstrap-css" href="/assets/css/bootstrap.min-4.3.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="fancybox-css" href="/assets/css/fancybox.min-3.5.7.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />
    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>
    
    <script>
        
        var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?efccc04cb44fc49faddac5876180b369";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        
    </script>
    
    
     
    
    
    
    
</head>


<div class="main-content flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="jackssybin网址导航">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="jackssybin网址导航">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="jackssybin网址导航">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="./">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			<li >
				<a href="https://www.jackssybin.cn/">
                                    <i class="fa fa-book fa-lg mr-2"></i>
                                    <span>作者</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			<li class="menu-item-has-children">
				<a href="">
                                    <i class="fa fa-cog fa-lg mr-2"></i>
                                    <span>配置</span>
                                </a>
				<ul class="sub-menu">
				
				    <li><a href="#">源码</a></li>
				
				    <li><a href="#">图标</a></li>
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "E4C600",
                                        "tmpSize": 14,
                                        "cityColor": "E4C600",
                                        "citySize": 14,
                                        "aqiColor": "#E4C600",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>


<body class="page-body boxed-container">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        <h1 class="mt-5"></h1>
        <div class="content">
            <h2 id="permalink-articles201909161568642979330html">title: 三大解析库的使用
date: &lsquo;2019-08-30 20:53:19&rsquo;
updated: &lsquo;2019-08-30 20:53:19&rsquo;
tags: [python学习, scrapy]
permalink: /articles/2019/09/16/1568642979330.html</h2>
<p>1，XPath的使用</p>
<p>在使用前，需要安装lxml库。</p>
<p>安装代码：pip3 install lxml</p>
<p>1.1XPath的常用规则:</p>
<p>/  表示选取直接子节点</p>
<p>// 表示选取所有子孙节点</p>
<p>.  选取当前节点</p>
<p>.. 选取当前结点的父节点</p>
<p>@  选取属性</p>
<p>看完这些？你是不是还是一脸懵逼？下面我们来实际运用一下。</p>
<p>1.2实例引用</p>
<p>如图：
<img src="https://upload-images.jianshu.io/upload_images/9489193-894cb57cd918b0e5?imageMogr2/auto-orient/strip%7CimageView2/2/w/601/format/webp" alt="null"></p>
<p>导入etree模块</p>
<p>etree.HTML()是构造一个XPath对象</p>
<p>etree.tostring()是对代码进行修正，如果有缺失的部分，会自动修复</p>
<p>方法比较简单，就不截取效果图了。</p>
<p>如果我们相对本地的文件进行解析怎么办？我们可以这样写</p>
<p>etree.parse()第一个参数为html的路径，第二（etree.HTMLParser()）和上面etree.HTML()的性质是一样的，为了方便，接下里我使用对本地文件进行解析。</p>
<p>html文本如下：
<img src="https://upload-images.jianshu.io/upload_images/9489193-1e91c4b0089b9ce3?imageMogr2/auto-orient/strip%7CimageView2/2/w/673/format/webp" alt="null"></p>
<p>1.3获取所有的节点
<img src="https://upload-images.jianshu.io/upload_images/9489193-ed380859907cff0f?imageMogr2/auto-orient/strip%7CimageView2/2/w/826/format/webp" alt="null"></p>
<p>结果：
<img src="https://upload-images.jianshu.io/upload_images/9489193-74cf382dee291979?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/format/webp" alt="null"></p>
<p>开头用//表示选取所有符合的节点，*表示获取所有的节点，</p>
<p>上面两句话一看这不是一个意思吗？会不懂！</p>
<p>我们可以分为两步理解:</p>
<p>第一步//是选取所有符合要求的节点，没有指明是什么要求！，不知道你要获取什么.</p>
<p>第二步*表示所有节点，所以才会获取所有节点。这样理解起来应该会很容易了吧。</p>
<p>注意：返回的是一个列表</p>
<p>1.4获取指定的节点</p>
<p>还是上面的html文本，如果我们想获取li节点怎么办？</p>
<p>只需要将result_text=html.xpath(&rsquo;//*&rsquo;)修改成result_text=html.xpath(&rsquo;//li')</p>
<p>如果想获取a节点，就修改成//a,也可以写成//li//a，或者//ul//a获取//li/a</p>
<p>都是可以获取到但是如果//ul/a是获取不到的因为/表示的是直接子节点</p>
<p>注意：返回的都是节点，并不是文本信息。</p>
<p>即：
<img src="https://upload-images.jianshu.io/upload_images/9489193-03d5304e4ccfa655?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/format/webp" alt="null"></p>
<p>这种形式。</p>
<p>1.4属性匹配</p>
<p>如果我们想要a标签的href属性，我们可以修改成//a/@href</p>
<p>返回结果：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9489193-03ea291e67b5d3cb?imageMogr2/auto-orient/strip%7CimageView2/2/w/586/format/webp" alt="null">
返回的也是一个列表</p>
<p>如果我们想要匹配class为li_1的li，可以修改成//li[@class=&ldquo;li_1&rdquo;]即可</p>
<p>1.5父节点匹配</p>
<p>我们来获取link2.html的a节点的父节点的class属性，我们是需要修改成//a[@href=&ldquo;link2.html&rdquo;]/../@class，这里的..表示寻找父节点，返回的依然是一个列表。</p>
<p>1.6获取文本</p>
<p>我们来获取class为li_3的li下a的文本，可以写成//li[@class=&ldquo;li_3&rdquo;]/a/text()即可</p>
<p>1.7contains()函数</p>
<p>比如其中有一个li为：<li class="li li_last"  id="caidan"></li></p>
<p>此时：li具有两个class名，我们如果这样写//li[@class=&ldquo;li&rdquo;]是获取不到节点的</p>
<p>那么我们可以这样写获取到节点//li[contains(@class,&ldquo;li&rdquo;)]。</p>
<p>1.8多属性获取</p>
<li class="li  li_last" id="caidan"></li>，同样是这个li我们需要获取class名为li同时id为caidan的li，可以这样写//li[contains(@class,"li") and @id="caidan"]
<p>获取class名为li或者id为caidan的li就用or。</p>
<p>1.9，last(),position()函数</p>
<p>上面的html有很多li，如果我只想获取第一个可以这样：</p>
<p>//li[1],同理第二个改成2就可以了，如果想获取最后一个：//li[last()]</p>
<p>如果想获取前两个：//li[position()&lt;3]</p>
<p>2,Beautiful Soup的使用</p>
<p>同样的在使用前我们也要安装Beautiful Soup</p>
<p>没有安装的请自行安装。</p>
<p>首先导入模块：from bs4 import BeautifulSoup</p>
<p>这次我们直接用一个网站来试试，我选择的是猫眼网，</p>
<p>你可以选择其他网站哦。</p>
<p>获取网页部分，上节有教，链接：python第二大神器requests</p>
<p>如图：
<img src="https://upload-images.jianshu.io/upload_images/9489193-0358dde90d05c895?imageMogr2/auto-orient/strip%7CimageView2/2/w/806/format/webp" alt="null"></p>
<p>2.1初始化</p>
<p>BeautifulSoup()第一个参数为获取的网页内容，第二个参数为lxml，为什么是lxml？因为Beautiful Soup在解析时依赖解析器，python自带的解析器，容错能力差，比较慢，所以我们使用第三方解析器lxml，</p>
<p>prettify()是将获取的内容以缩进的方式输出，看起来很舒服</p>
<p>如图：
<img src="https://upload-images.jianshu.io/upload_images/9489193-dbfdbfc75df176f4?imageMogr2/auto-orient/strip%7CimageView2/2/w/1075/format/webp" alt="null"></p>
<p>看起来舒服多了。</p>
<p>2.2获取值</p>
<p>我们来获取一下title信息，我们是需要这样。
<img src="https://upload-images.jianshu.io/upload_images/9489193-1900977034e71409?imageMogr2/auto-orient/strip%7CimageView2/2/w/545/format/webp" alt="null"></p>
<p>结果：
<img src="https://upload-images.jianshu.io/upload_images/9489193-bec22ebe0c421ffc?imageMogr2/auto-orient/strip%7CimageView2/2/w/547/format/webp" alt="null"></p>
<p>我们可以看到title获取的是title节点的所有信息，而加个string就变成了title里的文本内容，这样是不是也是很简单？</p>
<p>2.21获取属性值</p>
<p>比如，我们想要获取img的src属性，我们只需要，soup.img[&lsquo;src&rsquo;]就可以获取到，soup.img.arrts[&lsquo;src&rsquo;]也可以获取到。</p>
<p>如果想获取到所有的属性就这样写：soup.img.arrts即可</p>
<p>如图所示：
<img src="https://upload-images.jianshu.io/upload_images/9489193-bf579d762bf10a19?imageMogr2/auto-orient/strip%7CimageView2/2/w/865/format/webp" alt="null"></p>
<p>注意：所有的属性返回的形式是以字典的形式返回。</p>
<p>2.3获取直接子节点和子孙节点，父节点，祖先节点，兄弟节点</p>
<p>获取直接子节点：contents，例如我想获取p标签的直接子节点：soup.p.contents即可</p>
<p>获取子孙节点：descendants,例如我想获取p标签的子孙节点：soup.p.descendants即可</p>
<p>获取父节点：parent属性，例如我想获取p标签的父节点：soup.p.parent即可</p>
<p>获取祖先节点：parents属性，例如我想获取p标签的祖先节点：soup.p.parents即可</p>
<p>获取兄弟节点：next_sibling,previous_sibling,next_siblings,previous_siblings分别为下一个兄弟节点，上一个兄弟节点，上面所有的兄弟节点，下面所有的兄弟节点。</p>
<p>2.4获取文本属性</p>
<p>string为获取文本</p>
<p>attrs为获取属性</p>
<p>2.5方法选择器</p>
<p>find_all()返回的一个列表，匹配所有符合要求的元素</p>
<p>如果我们想要获取ul可以这样写：soup.find_all(name=&lsquo;ul&rsquo;)</p>
<p>如果我们想要获取id为id1属性可以这样写：soup.find_all(arrts[id=&lsquo;id1&rsquo;])</p>
<p>如果我们想要获取class为class1属性可以这样写：soup.find_all(arrts[class_=&lsquo;class1&rsquo;])</p>
<p>因为class有特殊意义，所以我们获取class的时候价格_即可</p>
<p>如果我们想要获取文本值可以这样写：soup.find_all(text=re.compile(&rsquo;&rsquo;))</p>
<p>匹配text需要用到正则，匹配你想要的text值</p>
<p>find()只返回一个值，匹配到符合要求的第一个值。</p>
<p>用法和上面的方法一样</p>
<p>注意：以上说有的属性，方法都是通过我实例的soup来调用，soup是我的命名，你可以修改它，同时你调用就要用你的命名了</p>
<p>2.6css选择器</p>
<p>我们如果用css选择器需要调用select()方法</p>
<p>比如想获取class名为class1的节点，我们可以这样写：soup.select(&rsquo;.class1&rsquo;)即可，和css的表达方式是一样的，但是他的css选择器功能不够强大，下面我们介绍一个针对css的解析库。</p>
<p>3，pyquery的使用</p>
<p>首先要安装pyquery</p>
<p>没有安装的请自行安装。</p>
<p>导入模块：from pyquery import PyQuery</p>
<p>首先和上面的一样，同样需要初始化，获取对象</p>
<p>如下：
<img src="https://upload-images.jianshu.io/upload_images/9489193-73650652441e364b?imageMogr2/auto-orient/strip%7CimageView2/2/w/648/format/webp" alt="null"></p>
<p>结果：
<img src="https://upload-images.jianshu.io/upload_images/9489193-04de017e3b379475?imageMogr2/auto-orient/strip%7CimageView2/2/w/714/format/webp" alt="null"></p>
<p>这样就获取到了所有的li</p>
<p>此外：初始化对象时，可以填写文本（上面就是），还可以填写url：PyQuery(url=&lsquo;<a href="https://maoyan.com/'">https://maoyan.com/'</a>)</p>
<p>还可以填写本地文件：PyQuery(filename=&rsquo;&rsquo;),&lsquo;&lsquo;中填写本地文件的路径</p>
<p>3.1css选择器的基本用法</p>
<p>如果想选取class名为class1下的li可以这样写result(&rsquo;.class li&rsquo;)和css的选择器写法是一样的。</p>
<p>3.2find()方法，子节点，父节点，兄弟节点</p>
<p>和上面不同这里的find()方法是查找所有的子孙节点，</p>
<p>如果想获取li下的所有a节点可以这样写：result(&rsquo;li&rsquo;).find(&lsquo;a&rsquo;)即可</p>
<p>如果只想查找子节点：children()方法即可</p>
<p>父节点：parent()获取直接父节点</p>
<p>获取所有父节点：parents()获取所有父节点，如果只想要父节节点中class为class1的可以这样写：parents(&rsquo;.class1&rsquo;)</p>
<p>注意：输出的是父节点的所有内容。</p>
<p>兄弟节点：siblis()方法，如果只想要兄弟节点中id为id1的可以这样写：parents(&rsquo;#id1&rsquo;)</p>
<p>3.3对于获取的结果，不想上面返回的是列表，这里如果返回多个对象需要for循环遍历</p>
<p>3.4获取属性，文本，</p>
<p>例如我们想要获取li下a的href属性（attr()函数），由于有多个结果，所以我们这里需要遍历。</p>
<p>如图：
<img src="https://upload-images.jianshu.io/upload_images/9489193-a14da0cb8e5ef53a?imageMogr2/auto-orient/strip%7CimageView2/2/w/748/format/webp" alt="null"></p>
<p>结果：
<img src="https://upload-images.jianshu.io/upload_images/9489193-cec0129db5036d93?imageMogr2/auto-orient/strip%7CimageView2/2/w/349/format/webp" alt="null"></p>
<p>注意：如果不遍历，只会输出第一个</p>
<p>如果我们想要获取文本值：text()方法，只需要将attr()函数改为text()函数即可</p>
<p>3.6对属性，文本，class的删除，修改</p>
<p>addClass(&lsquo;class1&rsquo;):表示添加一个class名，名字为class1</p>
<p>removeClass(&lsquo;class1&rsquo;)表示删除一个class名，名字为class1</p>
<p>我们来实例一下：
<img src="https://upload-images.jianshu.io/upload_images/9489193-032a1fa8918cbba7?imageMogr2/auto-orient/strip%7CimageView2/2/w/702/format/webp" alt="null"></p>
<p>结果：
<img src="https://upload-images.jianshu.io/upload_images/9489193-0d658186eea56c95?imageMogr2/auto-orient/strip%7CimageView2/2/w/1080/format/webp" alt="null"></p>
<p>同时我们还可以添加属性，文本</p>
<p>添加属性：attr(&rsquo;name&rsquo;,&rsquo;name1&rsquo;)</p>
<p>添加文本：text(&lsquo;123123&rsquo;)</p>
<p>添加代码：html(&lsquo;12122&rsquo;)</p>
<p>有了添加，就有删除remove()函数</p>
<p>比如如果我们想删除li下的所有a节点</p>
<p>可以这样写：result(&rsquo;li&rsquo;).find(&lsquo;a&rsquo;).remove()</p>
<p>4.完
参考：<a href="https://www.jianshu.com/p/ef5fc046fcea">https://www.jianshu.com/p/ef5fc046fcea</a></p>

        </div>
    </div>
    </main>

    <style>
        .content {
            font-size: 1.25rem;
          }
          
          .content h1,
          .content h2,
          .content h3,
          .content h4 {
            margin: 15px 10px 5px;
          }
          
    </style>

        <footer class="main-footer footer-type-1 text-xs">
            <div id="footer-tools" class="d-flex flex-column">
                <a href="javascript:" id="go-to-up" class="btn rounded-circle go-up m-1" rel="go-top">
                    <i class="iconfont icon-to-up"></i>
                </a>
                
                <a href="javascript:" data-toggle="modal" data-target="#search-modal" class="btn rounded-circle m-1"
                    rel="search" one-link-mark="yes">
                    <i class="iconfont icon-search"></i>
                </a>
                <a href="https://www.yuque.com/shenweiyan" class="btn rounded-circle kefu m-1" target="_blank" data-toggle="tooltip" data-placement="left" title="联系我们">
                    <i class="mode-ico iconfont icon-qq"></i>
                </a>
                
                
		<a href="javascript:" onclick="window.location.href='javascript:switchNightMode()'" class="btn rounded-circle switch-dark-mode m-1" id="yejian"
                    data-toggle="tooltip" data-placement="left" title="日间模式">
                    <i class="mode-ico iconfont icon-night"></i>
                </a>
                
            </div>
            <div class="footer-inner">
                <div class="footer-text">本站内容源自互联网，如有内容侵犯了你的权益，请联系删除相关内容，联系邮箱：jackxiazhou@yeah.net <br/>© 2023 - 2024 By <a href="https://github.com/shenweiyan/WebStack-Hugo">WebStack-Hugo</a> | <a href="https://www.bioitee.com/">Bio IT 爱好者</a> | <a href="http://beian.miit.gov.cn/">京ICP备17039180号-1</a><br/></div>
            </div>
        </footer>
    </div>
</div>


<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-mini.js' id='appmini-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)")
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>
</body>
</html>

