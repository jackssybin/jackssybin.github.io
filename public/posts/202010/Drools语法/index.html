<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />
    <title>jackssybin网址导航</title>
    <link rel="shortcut icon" href="/assets/images/favicon.png" />
    <meta name="keywords" content="jackssybin网址导航" />
    
    <meta name="baidu-site-verification" content="codeva-cCAOSG8MBO" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="bootstrap-css" href="/assets/css/bootstrap.min-4.3.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="fancybox-css" href="/assets/css/fancybox.min-3.5.7.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />
    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>
    
    <script>
        
        var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?efccc04cb44fc49faddac5876180b369";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        
    </script>
    
    
     
    
    
    
    
</head>


<div class="main-content flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="jackssybin网址导航">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="jackssybin网址导航">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="jackssybin网址导航">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="./">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			<li >
				<a href="https://www.jackssybin.cn/">
                                    <i class="fa fa-book fa-lg mr-2"></i>
                                    <span>作者</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			<li class="menu-item-has-children">
				<a href="">
                                    <i class="fa fa-cog fa-lg mr-2"></i>
                                    <span>配置</span>
                                </a>
				<ul class="sub-menu">
				
				    <li><a href="#">源码</a></li>
				
				    <li><a href="#">图标</a></li>
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "E4C600",
                                        "tmpSize": 14,
                                        "cityColor": "E4C600",
                                        "citySize": 14,
                                        "aqiColor": "#E4C600",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>


<body class="page-body boxed-container">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        <h1 class="mt-5"></h1>
        <div class="content">
            <h2 id="permalink-articles202010291603968711195html">title: Drools语法
date: &lsquo;2020-10-29 18:51:51&rsquo;
updated: &lsquo;2020-10-29 18:51:51&rsquo;
tags: [Drools, 规则引擎]
permalink: /articles/2020/10/29/1603968711195.html</h2>
<p><img src="https://b3logfile.com/bing/20201011.jpg?imageView2/1/w/960/h/540/interlace/1/q/100" alt=""></p>
<h2 id="drools语法-language">Drools语法-Language</h2>
<h3 id="关键词">关键词</h3>
<ul>
<li>
<p>Hard keywords(Cannot use any):</p>
<p><code>true,false,null</code></p>
</li>
<li>
<p>Soft keywords(avoid use)</p>
<p><code>lock-on-active date-effective date-expires no-loop auto-focus activation-group agenda-group ruleflow-group entry-point duration package import dialect salience enabled attributes rule extend when then template query declare function global eval not in or and exists forall accumulate collect from action reverse result end over init</code></p>
</li>
</ul>
<h3 id="注释">注释</h3>
<ul>
<li>
<p>单行注释</p>
<pre tabindex="0"><code>rule &#34;Testing Comments&#34;
when
    // this is a single line comment
    eval( true ) // this is a comment in the same line of a pattern
then
    // this is a comment inside a semantic code block
end
</code></pre></li>
<li>
<p>多行注释</p>
<pre tabindex="0"><code>rule &#34;Test Multi-line Comments&#34;
when
    /* this is a multi-line comment
    in the left hand side of a rule */
eval( true )
then
    /* and this is a multi-line comment
    in the right hand side of a rule */
end
</code></pre></li>
</ul>
<h3 id="pakage">Pakage</h3>
<ul>
<li>
<p>package</p>
<p><code>package</code>表示一个命名空间.package是必须定义的，必须放在规则文件第一行.</p>
</li>
<li>
<p>import</p>
<p><code>import</code>语句的工作方式类似于Java中的import语句。您需要为要在规则中使用的任何对象指定完全限定路径和类型名称。</p>
</li>
<li>
<p>global</p>
<p><code>global</code>用于定义全局变量。</p>
<p>Rules:</p>
<pre tabindex="0"><code>global java.util.List myGlobalList;
<p>rule &quot;Using a global&quot;
when
eval( true )
then
myGlobalList.add( &quot;Hello World&quot; );
end
</code></pre><p>Set the global value:</p></p>
<pre tabindex="0"><code>List list = new ArrayList();
KieSession kieSession = kiebase.newKieSession();
kieSession.setGlobal( &#34;myGlobalList&#34;, list );
</code></pre></li>
</ul>
<h3 id="function">Function</h3>
<ul>
<li>
<p>function</p>
<p><code>function</code>是一种将语义代码放置在规则源文件中的方法，而不是普通的Java类</p>
<pre tabindex="0"><code>function String hello(String name) {
  return &#34;Hello &#34;+name+&#34;!&#34;;
}
import function my.package.Foo.hello
rule &#34;using a static function&#34;
when
  eval( true )
then
  System.out.println( hello( &#34;Bob&#34; ) );
end
</code></pre></li>
</ul>
<h3 id="query">Query</h3>
<ul>
<li>
<p>query</p>
<p><code>query</code>是一种搜索工作内存中与指定条件匹配的事实的简单方法.</p>
<pre tabindex="0"><code>对所有30岁以上的人的简单查询
query &#34;people over the age of 30&#34;
    person : Person( age &gt; 30 )
end
<p>查询超过x岁的人，以及居住在y的人
query &quot;people over the age of x&quot;  (int x, String y)
person : Person( age &gt; x, location == y )
end</p>
<p>QueryResults results = ksession.getQueryResults( &quot;people over the age of 30&quot; );
System.out.println( &quot;we have &quot; + results.size() + &quot; people over the age  of 30&quot; );</p>
<p>System.out.println( &quot;These people are are over 30:&quot; );</p>
<p>for ( QueryResultsRow row : results ) {
Person person = ( Person ) row.get( &quot;person&quot; );
System.out.println( person.getName() + &quot;\n&quot; );
}
</code></pre></li></p>
</ul>
<h3 id="rule">Rule</h3>
<p><code>rule</code>定义规则。<code>rule &quot;ruleName&quot;</code>。</p>
<p>一个规则可以包含三个部分：属性部分,条件部分：即<code>LHS</code>,结果部分：即<code>RHS</code>.
<img src="http://of0qa2hzs.bkt.clouddn.com/rule.jpg" alt=""></p>
<h4 id="属性部分-attributes">属性部分-Attributes</h4>
<p>定义当前规则执行的一些属性等，比如是否可被重复执行、过期时间、生效时间等。
<code>activation-group</code> <code>agenda-group</code> <code>auto-focus</code> <code>date-effective</code> <code>date-expires</code> <code>dialect</code> <code>duration</code> <code>duration-value</code> <code>enabled</code> <code>lock-on-active</code> <code>no-loop</code> <code>ruleflow-group</code> <code>salience</code></p>
<p><img src="http://of0qa2hzs.bkt.clouddn.com/1484118982%281%29.jpg" alt=""></p>
<ul>
<li>
<p>no-loop</p>
<p>默认值：false</p>
<p>类型：Boolean</p>
<p>在一个规则当中如果条件满足就对<code>Working Memory</code>当中的某个Fact对象进行了修改，比如使用update 将其更新到当前的<code>Working Memory</code>当中，这时引擎会再次检查所有的规则是否满足条件，如果满足会再次执行.</p>
</li>
<li>
<p>ruleflow-group</p>
<p>默认值：N/A</p>
<p>类型：String</p>
<p><code>Ruleflow</code>是一个Drools功能，可让您控制规则的触发。由相同的规则流组标识汇编的规则仅在其组处于活动状态时触发。将规则划分为一个个的组，然后在规则流当中通过使用<code>ruleflow-group</code>属性的值，从而使用对应的规则。</p>
</li>
<li>
<p>lock-on-active</p>
<p>默认值：false</p>
<p>类型：Boolean</p>
<p>当在规则上使用<code>ruleflow-group</code> 属性或<code>agenda-group</code> 属性的时候，将<code>lock-on-action</code> 属性的值设置为true，可能避免因某些Fact 对象被修改而使已经执行过的规则再次被激活执行。可以看出该属性与<code>no-loop</code> 属性有相似之处，<code>no-loop</code> 属性是为了避免Fact 修改或调用了<code>insert</code>、<code>retract</code>、<code>update</code> 之类而导致规则再次激活执行，这里的<code>lock-on-action</code> 属性也是起这个作用，<code>lock-on-active</code> 是<code>no-loop</code> 的增强版属性，它主要作用在使用<code>ruleflow-group</code> 属性或<code>agenda-group</code> 属性的时候</p>
</li>
<li>
<p>salience</p>
<p>默认值：0</p>
<p>类型：integer</p>
<p>设置规则执行的优先级，<code>salience</code> 属性的值是一个数字，数字越大执行优先级越高，同时它的值可以是一个负数.
规则的<code>salience</code> 默认值为0，所以如果我们不手动设置规则的<code>salience</code> 属性，那么它的执行顺序是随机的.</p>
</li>
<li>
<p>agenda-group</p>
<p>默认值：MAIN</p>
<p>类型：String</p>
<p>规则的调用与执行是通过<code>StatelessSession</code> 或<code>StatefulSession</code> 来实现的，一般的顺序是创建一个<code>StatelessSession</code> 或<code>StatefulSession</code>，将各种经过编译的规则的package 添加到session当中，接下来将规则当中可能用到的Global对象和Fact对象插入到Session 当中，最后调用fireAllRules 方法来触发、执行规则。在没有调用最后一步<code>fireAllRules</code>方法之前，所有的规则及插入的<code>Fact</code>对象都存放在一个名叫<code>Agenda</code>表的对象当中，这个<code>Agenda</code>表中每一个规则及与其匹配相关业务数据叫做<code>Activation</code>，在调用<code>fireAllRules</code>方法后，这些Activation 会依次执行，这些位于Agenda 表中的Activation 的执行顺序在没有设置相关用来控制顺序的属性时（比如salience 属性），它的执行顺序是随机的，不确定的。<code>Agenda Group</code> 是用来在Agenda 的基础之上，对现在的规则进行再次分组，具体的分组方法可以采用为规则添加<code>agenda-group</code>属性来实现。<code>agenda-group</code> 属性的值也是一个字符串，通过这个字符串，可以将规则分为若干个<code>Agenda Group</code>，默认情况下，引擎在调用这些设置了<code>agenda-group</code> 属性的规则的时候需要显示的指定某个<code>Agenda Group</code> 得到<code>Focus</code>（焦点），这样位于该<code>Agenda Group</code> 当中的规则才会触发执行，否则将不执行。</p>
</li>
<li>
<p>auto-focus</p>
<p>默认值：false</p>
<p>类型：Boolean</p>
<p>用来在已设置了<code>agenda-group</code>的规则上设置该规则是否可以自动独取<code>Focus</code>，如果该属性设置为true，那么在引擎执行时，就不需要显示的为某个<code>Agenda Group</code>设置<code>Focus</code>，否则需要。对于规则的执行的控制，还可以使用<code>Agenda Filter</code> 来实现。在Drools 当中，提供了一个名为<code>org.drools.runtime.rule.AgendaFilter 的Agenda Filter</code> 接口，用户可以实现该接口，通过规则当中的某些属性来控制规则要不要执行。<code>org.drools.runtime.rule.AgendaFilter</code> 接口只有一个方法需要实现，方法体如下： <code> public boolean accept(Activation activation);</code>  在该方法当中提供了一个<code>Activation</code> 参数，通过该参数我们可以得到当前正在执行的规则对象或其它一些属性，该方法要返回一个布尔值，该布尔值就决定了要不要执行当前这个规则，返回true 就执行规则，否则就不执行。</p>
</li>
<li>
<p>activation-group</p>
<p>默认值：N/A</p>
<p>类型：String</p>
<p>该属性的作用是将若干个规则划分成一个组，用一个字符串来给这个组命名，这样在执行的时候，具有相同<code>activation-group</code>属性的规则中只要有一个会被执行，其它的规则都将不再执行。也就是说，在一组具有相同<code>activation-group</code>属性的规则当中，只有一个规则会被执行，其它规则都将不会被执行。当然对于具有相同<code>activation-group</code>属性的规则当中究竟哪一个会先执行，则可以用类似<code>salience</code>之类属性来实现。</p>
</li>
<li>
<p>dialect</p>
<p>默认值： 根据package指定</p>
<p>类型：String，&ldquo;java&rdquo; or &ldquo;mvel&rdquo;</p>
<p><code>dialect</code>种类是用于LHS或RHS代码块中的任何代码表达式的语言。目前有两种<code>dialect</code>，<code>Java</code>和<code>MVEL</code>。虽然<code>dialect</code>可以在包级别指定，但此属性允许为规则覆盖包定义。</p>
</li>
<li>
<p>date-effective</p>
<p>默认值：N/A</p>
<p>类型：字符串，包含日期和时间定义。格式：<code>dd-MMM-yyyy</code>(25-Sep-2009).</p>
<p>仅当当前日期和时间在日期有效属性后面时，才能激活规则。</p>
</li>
<li>
<p>date-expires</p>
<p>默认值：N/A</p>
<p>类型：字符串，包含日期和时间定义。格式：<code>dd-MMM-yyyy</code>(25-Sep-2009).</p>
<p>如果当前日期和时间在<code>date-expires</code>属性之后，则无法激活规则.</p>
</li>
<li>
<p>enabled</p>
<p>默认值：false</p>
<p>类型：String</p>
<p>表示规则是可用的，如果手工为一个规则添加一个<code>enabled</code>属性，并且设置其<code>enabled</code>属性值为false，那么引擎就不会执行该规则.</p>
</li>
<li>
<p>duration</p>
<p>默认值：无</p>
<p>类型：long</p>
<p>持续时间指示规则将在指定的持续时间之后触发，如果它仍然是true.</p>
</li>
</ul>
<h4 id="条件部分-lhs">条件部分-LHS</h4>
<p>定义当前规则的条件，如<code>when Message()</code>; 判断当前workingMemory中是否存在Message对象。</p>
<p><code>Left Hand Side</code>（<code>LHS</code>）是规则的条件部分的公共名称。它由零个或多个条件元素组成。
如果LHS为空，它将被认为是一个条件元素，它总是为真，并且当创建一个新的WorkingMemory会话时，它将被激活一次。</p>
<pre tabindex="0"><code>Conditions / LHS —匹配模式（Patterns）
<pre><code>没有字段约束的Pattern
Person()

有文本字段约束的Pattern
Person( name == “bob” )

字段绑定的Pattern
Person( $name : name == “bob” )
变量名称可以是任何合法的java变量，$是可选的，可由于区分字段和变量

Fact绑定的Pattern
$bob : Person( name == “bob” )字段绑定的Pattern

变量约束的Pattern
Person( name == $name )
</code></pre>
<p></code></pre><p>Drools提供了十二种类型比较操作符:
<code>&gt;</code>  <code>&gt;=</code>  <code>&lt;</code>  <code>&lt;=</code>  <code>==</code>  <code>!=</code>  <code>contains</code>  <code>not contains</code>  <code>memberOf</code>  <code>not memberOf</code> <code>matches</code> <code>not matches</code></p></p>
<ul>
<li>
<p>contains</p>
<p>运算符<code>contains</code>用于检查作为Collection或elements的字段是否包含指定的值.</p>
<pre tabindex="0"><code>Cheese( name contains &#34;tilto&#34; )
Person( fullName contains &#34;Jr&#34; )
String( this contains &#34;foo&#34; )
</code></pre></li>
<li>
<p>not contains</p>
<p>和<code>contains</code>相反</p>
</li>
<li>
<p>memberOf</p>
<p>运算符<code>memberOf</code>用于检查字段是否是集合的成员或元素;该集合必须是一个变量。</p>
<pre tabindex="0"><code>CheeseCounter( cheese memberOf $matureCheeses )
</code></pre></li>
<li>
<p>not memberOf</p>
<p>和<code>memberOf</code>相反</p>
</li>
<li>
<p>matches</p>
<p>正则表达式匹配，与java不同的是，不用考虑&rsquo;/&lsquo;的转义问题</p>
<pre tabindex="0"><code>Cheese( type matches &#34;(Buffalo)?\\S*Mozarella&#34; )
</code></pre></li>
<li>
<p>not matches</p>
<p>和<code>matches</code>相反</p>
</li>
</ul>
<p>其他条件元素：</p>
<ul>
<li>
<p>exists</p>
<p>存在。检查Working Memory是否存在某物。使用模式<code>exists</code>，则规则将只激活最多一次，而不管在工作存储器中存在与存在模式中的条件匹配的数据量</p>
</li>
<li>
<p>not</p>
<p>不存在，检查工作存储器中是否存在某物。认为“<code>not</code>”意味着“<code>there must be none of...</code>”。</p>
</li>
</ul>
<h4 id="结果部分-rhs">结果部分-RHS</h4>
<p>这里可以写普通java代码，即当前规则条件满足后执行的操作，可以直接调用Fact对象的方法来操作应用。</p>
<p><code>Right Hand Side</code>（<code>RHS</code>）是规则的结果或动作部分的通用名称;此部分应包含要执行的操作的列表。在规则的RHS中使用命令式或条件式代码是不好的做法;作为一个规则应该是<code>原子</code>的性质 - “<code>when this, then do this</code>”，而不是“<code>when this, maybe do this</code>”。规则的RHS部分也应该保持较小，从而保持声明性和可读性。如果你发现你需要在RHS中的命令式和/或条件代码，那么也许你应该把这个规则分成多个规则。 <code>RHS</code>的主要目的是插入，删除或修改工作存储器数据。为了协助，有一些方便的方法可以用来修改工作记忆;而不必首先引用工作内存实例。</p>
<ul>
<li>
<p>update</p>
<p>更新，告诉引擎对象已经改变（已经绑定到LHS上的某个东西），并且规则可能需要重新考虑。</p>
</li>
<li>
<p>insert(new Something())</p>
<p>插入，往当前<code>workingMemory</code>中插入一个新的Fact对象，会触发规则的再次执行，除非使用<code>no-loop</code>限定；</p>
</li>
<li>
<p>insertLogical(new Something())</p>
<p>类似于<code>insert</code>，但是当没有更多的facts支持当前触发规则的真实性时，对象将被自动删除。</p>
</li>
<li>
<p>modify</p>
<p>修改，与<code>update</code>语法不同，结果都是更新操作。该语言扩展提供了一种结构化的方法来更新事实。它将更新操作与一些setter调用相结合来更改对象的字段。</p>
</li>
<li>
<p>retract</p>
<p>删除</p>
</li>
</ul>
<p>一些内置的method。</p>
<ul>
<li>
<p>drools.halt()</p>
<p>调用<code>drools.halt（）</code>立即终止规则执行。这是需要将控制权返回到当前会话使用<code>fireUntilHalt（）</code>的点。</p>
</li>
<li>
<p>drools.getWorkingMemory()</p>
<p>返回WorkingMemory对象.</p>
</li>
<li>
<p>drools.setFocus( String s)</p>
<p>将焦点设置为指定的<code>agenda group</code>.</p>
</li>
<li>
<p>drools.getRule().getName()</p>
<p>从规则的RHS调用，返回规则的名称。</p>
</li>
<li>
<p>drools.getTuple()</p>
<p>返回与当前执行的规则匹配的<code>Tuple</code>，而drools.getActivation（）传递相应的激活。</p>
</li>
</ul>

        </div>
    </div>
    </main>

    <style>
        .content {
            font-size: 1.25rem;
          }
          
          .content h1,
          .content h2,
          .content h3,
          .content h4 {
            margin: 15px 10px 5px;
          }
          
    </style>

        <footer class="main-footer footer-type-1 text-xs">
            <div id="footer-tools" class="d-flex flex-column">
                <a href="javascript:" id="go-to-up" class="btn rounded-circle go-up m-1" rel="go-top">
                    <i class="iconfont icon-to-up"></i>
                </a>
                
                <a href="javascript:" data-toggle="modal" data-target="#search-modal" class="btn rounded-circle m-1"
                    rel="search" one-link-mark="yes">
                    <i class="iconfont icon-search"></i>
                </a>
                <a href="https://www.yuque.com/shenweiyan" class="btn rounded-circle kefu m-1" target="_blank" data-toggle="tooltip" data-placement="left" title="联系我们">
                    <i class="mode-ico iconfont icon-qq"></i>
                </a>
                
                
		<a href="javascript:" onclick="window.location.href='javascript:switchNightMode()'" class="btn rounded-circle switch-dark-mode m-1" id="yejian"
                    data-toggle="tooltip" data-placement="left" title="日间模式">
                    <i class="mode-ico iconfont icon-night"></i>
                </a>
                
            </div>
            <div class="footer-inner">
                <div class="footer-text">本站内容源自互联网，如有内容侵犯了你的权益，请联系删除相关内容，联系邮箱：jackxiazhou@yeah.net <br/>© 2023 - 2024 By <a href="https://github.com/shenweiyan/WebStack-Hugo">WebStack-Hugo</a> | <a href="https://www.bioitee.com/">Bio IT 爱好者</a> | <a href="http://beian.miit.gov.cn/">京ICP备17039180号-1</a><br/></div>
            </div>
        </footer>
    </div>
</div>


<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-mini.js' id='appmini-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background-image", "url(assets\/images\/bg-dna.jpg)")
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>
</body>
</html>

